import{r as o,j as e,aw as C,A as N}from"./index-e9055987.js";import{s as F}from"./AttributeService-ad28792a.js";import{C as S,a as D}from"./chevron-right-32c326f0.js";import"./Alert-102e0217.js";import"./index-48bcc748.js";import{B as I}from"./Badge-9568a8b0.js";import{B as u}from"./Button-ba65fcd6.js";import"./Card-433b6df5.js";import"./index-0b16cfb5.js";import"./index-6ec4b8b8.js";import{D as B}from"./Dialog-0f29b530.js";import"./Drawer-1d10f851.js";import"./ScrollBar-7cb0876a.js";import"./FormItem-ea0b05bc.js";import{I as y}from"./Input-cff490ba.js";import"./index-cba86877.js";import"./index-fd641029.js";import"./toast-38b8809c.js";import"./Skeleton-ede84c2e.js";import"./index-6bfd69bd.js";import"./index-ca92c429.js";import{S as _}from"./Select-3959542b.js";import"./Switcher-fc6ab2a0.js";import"./index-95867d9f.js";import"./index-470afdad.js";import"./Tag-0c9ab60f.js";import"./index-b1813226.js";import"./Tooltip-c9ef7fc2.js";import"./Upload-73c59612.js";import"./createLucideIcon-35c01f3b.js";import"./StatusIcon-879e2680.js";import"./index.esm-1ac4f407.js";import"./CloseButton-3f8e850c.js";import"./motion-4061acbd.js";import"./cloneDeep-860e24f8.js";import"./_Uint8Array-1ce16692.js";import"./_MapCache-0feb66c1.js";import"./Views-51136580.js";import"./_getPrototype-241bf201.js";import"./_baseIsEqual-7de73e16.js";import"./get-c3140d19.js";import"./useControllableState-461bebfa.js";import"./useRootClose-9a8a5c26.js";import"./useDidUpdate-5adca6d0.js";import"./index-1248b5e2.js";import"./warning-6ee4a779.js";import"./useUncertainRef-63de6025.js";import"./isNil-1a93575e.js";import"./index-8f83c5d8.js";const A=F;function V(){const[a,i]=o.useState([]),[s,d]=o.useState([]),[r,l]=o.useState({}),[m,x]=o.useState({});o.useEffect(()=>{A.getCategories().then(i),A.getAttributes().then(d)},[]);const p=t=>{l(n=>({...n,[t]:!n[t]}))},j=t=>{x(n=>({...n,[t]:!n[t]}))},b=t=>new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),g=(t,n=0)=>t.map(c=>e.jsxs(C.Fragment,{children:[e.jsxs("tr",{className:`hover:bg-gray-50 ${n>0?"bg-gray-100":""}`,children:[e.jsx("td",{className:"py-2 px-4 border-b",style:{paddingLeft:`${1+n*2}rem`},children:c.subcategories&&c.subcategories.length>0&&e.jsx("button",{onClick:()=>p(c.id),className:"focus:outline-none","aria-label":r[c.id]?"Contraer categoría":"Expandir categoría",children:r[c.id]?e.jsx(S,{className:"h-5 w-5 text-gray-500"}):e.jsx(D,{className:"h-5 w-5 text-gray-500"})})}),e.jsx("td",{className:"py-2 px-4 border-b",children:c.id}),e.jsx("td",{className:"py-2 px-4 border-b",children:c.name}),e.jsx("td",{className:"py-2 px-4 border-b",children:c.description}),e.jsx("td",{className:"py-2 px-4 border-b",children:b(c.created_at)})]}),r[c.id]&&c.subcategories&&c.subcategories.length>0&&g(c.subcategories,n+1)]},c.id));return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Panel de Administración"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Categorías"}),e.jsx("div",{className:"overflow-x-auto mb-8",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 border-b text-left"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"ID"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Nombre"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Descripción"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Fecha de Creación"})]})}),e.jsx("tbody",{children:g(a)})]})}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Atributos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 border-b text-left"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"ID"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Nombre"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Fecha de Creación"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs(C.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-4 border-b",children:t.values&&t.values.length>0&&e.jsx("button",{onClick:()=>j(t.id),className:"focus:outline-none","aria-label":m[t.id]?"Contraer atributo":"Expandir atributo",children:m[t.id]?e.jsx(S,{className:"h-5 w-5 text-gray-500"}):e.jsx(D,{className:"h-5 w-5 text-gray-500"})})}),e.jsx("td",{className:"py-2 px-4 border-b",children:t.id}),e.jsx("td",{className:"py-2 px-4 border-b",children:t.name}),e.jsx("td",{className:"py-2 px-4 border-b",children:b(t.created_at)})]}),m[t.id]&&t.values&&t.values.length>0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-2 px-4 border-b",children:e.jsxs("table",{className:"min-w-full bg-gray-50",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"ID"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Valor"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Fecha de Creación"})]})}),e.jsx("tbody",{children:t.values.map(n=>e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"py-2 px-4 border-b",children:n.id}),e.jsx("td",{className:"py-2 px-4 border-b",children:n.value}),e.jsx("td",{className:"py-2 px-4 border-b",children:b(n.created_at)})]},n.id))})]})})})]},t.id))})]})})]})}async function O(){return N.fetchData({url:"attribute",method:"get"})}async function $(a,i){return N.fetchData({url:`attribute/${a._id}`,method:"patch",data:a})}async function w(){return N.fetchData({url:"category",method:"get"})}async function R(a){return N.fetchData({url:`category/${a._id}`,method:"patch",data:a})}const E=a=>{const[i,s]=o.useState([]),[d,r]=o.useState(!1),[l,m]=o.useState(null),x=async()=>{r(!0);try{const{data:p}=await a();s(p)}catch(p){m(p)}finally{r(!1)}};return o.useEffect(()=>{x()},[]),[i,s,d,l,x]};function v({ButtonText:a="",setIsOpen:i,isOpen:s,children:d}){const r=()=>i(!0),l=()=>i(!1);return e.jsxs(e.Fragment,{children:[e.jsx(B,{isOpen:s,onClose:l,onRequestClose:l,children:d}),e.jsx(u,{variant:"solid",onClick:()=>r(),children:a})]})}function L({defaultValue:a="",apiService:i,ButtonText:s="Crear Categoria"}){const[d,r]=o.useState(!1),[l,m]=o.useState(a),x=j=>m(b=>({...b,name:j.target.value})),p=()=>r(!1);return e.jsx("div",{children:e.jsx(v,{isOpen:d,setIsOpen:r,ButtonText:s,children:e.jsxs("div",{className:"flex gap-5 flex-col",children:[e.jsx("h3",{children:"Nombre de Categoria"}),e.jsx(y,{name:"name",value:l.name,onChange:x,placeholder:"Ejemplo: Ropa"}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx(u,{onClick:()=>{p(),i(l)},children:"Aceptar"}),e.jsx(u,{onClick:()=>p(),children:"Cancelar"})]})]})})})}function G({defaultValue:a={name:"",value:[]},apiService:i,ButtonText:s=""}){const[d,r]=o.useState(!1),[l,m]=o.useState(a);o.useState("");const[x,p]=o.useState(""),j=t=>m(n=>({...n,name:t.target.value})),b=t=>p(t.target.value),g=()=>r(!1);return e.jsx("div",{children:e.jsx(v,{isOpen:d,setIsOpen:r,ButtonText:s,children:e.jsxs("div",{className:"flex gap-5 flex-col",children:[e.jsx("h3",{children:"Nuevo Atributo"}),e.jsx(y,{name:"name",value:l.name,onChange:j,placeholder:"Nuevo Atributo, Ejemplo: Color"}),e.jsx(y,{value:x,onChange:b,placeholder:"Valor del Atributo, Ejemplo: Rojo"}),e.jsx(u,{variant:"solid",className:"mb-5",block:!0,onClick:()=>m(t=>({...t,value:[...t.value,{value:x}]})),children:"Añadir Valor"}),e.jsx("div",{className:"flex",children:l.value.map((t,n)=>e.jsx(I,{className:"mr-4 p-2",content:t.value},n))}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx(u,{onClick:()=>{g(),i(l)},children:"Aceptar"}),e.jsx(u,{onClick:()=>g(),children:"Cancelar"})]})]})})})}function T(a){const i=a.name.toLowerCase(),s=a.name;return{name:i,value:i,label:s,...a}}function U({defaultValue:a={name:"",categoryId:"",_id:""},apiService:i,ButtonText:s="Crear Subategoria",valueSelect:d=""}){const[r,l]=o.useState(!1),[m,x]=o.useState(a),[p,j]=o.useState([]),[b,g]=o.useState(d),t=async()=>{try{const{data:h}=await w();console.log(h);let f=h.map(k=>T(k));console.log(f),j(f)}catch(h){console.error("Error fetching data:",h)}};o.useEffect(()=>{t()},[]);const n=h=>x(f=>({...f,name:h.target.value})),c=()=>l(!1);return e.jsx("div",{children:e.jsx(v,{isOpen:r,setIsOpen:l,ButtonText:s,children:e.jsxs("div",{className:"flex gap-5 flex-col",children:[e.jsx("h3",{children:"Nombre de Categoria"}),e.jsx(_,{name:"categoryId",value:b,placeholder:"Categoria a la que pertenece",options:p,onChange:h=>x(f=>(console.log(f,h),g(h),{...f,categoryId:h._id}))}),e.jsx("h3",{children:"Nombre de Subategoria"}),e.jsx(y,{name:"name",value:m.name,onChange:n,placeholder:"Ejemplo: Blusa, Pantalón"}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx(u,{onClick:()=>{c(),i({...a,...m})},children:"Aceptar"}),e.jsx(u,{onClick:()=>c(),children:"Cancelar"})]})]})})})}async function q(a){return console.log(a),N.fetchData({url:`subcategory/${a._id}`,method:"patch",data:a})}function P(){const[a]=E(w),[i]=E(O);return e.jsxs("div",{children:[e.jsx("h3",{className:"my-6",children:" Atributos "}),i.map((s,d)=>e.jsxs("div",{style:{borderBottom:"1px solid black"},children:[e.jsxs("div",{className:"flex gap-10 items-center justify-evenly",children:[e.jsx("span",{children:s.name}),e.jsx(G,{apiService:$,ButtonText:"Editar",defaultValue:s}),e.jsx(u,{children:"Eliminar"})]}),e.jsxs("p",{className:"flex gap-12",children:[" ",s.value.map((r,l)=>e.jsx("span",{className:"my-2 p-5 py-2 bg-blue-300 rounded text-white",children:r.value},l))," "]}),e.jsx("br",{style:{background:"black",border:" 000 1px"}})]},d)),e.jsx("h3",{className:"my-6",children:" Categorias "}),a.map((s,d)=>e.jsxs("div",{style:{borderBottom:"1px solid black"},children:[e.jsxs("div",{className:"flex p-2 gap-16 items-center justify-evenly",children:[e.jsxs("span",{children:[s.name," "]}),e.jsx(L,{apiService:R,ButtonText:"Editar",defaultValue:s}),e.jsx(u,{children:"Eliminar"})]}),e.jsxs("p",{className:"flex gap-12 ",children:[" ",s.subcategories.map((r,l)=>e.jsx(U,{apiService:q,defaultValue:{...r,categoryId:s._id,name:r.name,oldCategory:s._id},ButtonText:r.name,valueSelect:{value:s.name,label:s.name,name:s.name}},l))]})]},d))]})}function Ge(){return e.jsxs("div",{children:[e.jsx("br",{}),e.jsx(P,{}),e.jsx(V,{})]})}export{Ge as default};
