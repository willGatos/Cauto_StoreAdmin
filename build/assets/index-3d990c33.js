import{A as f,j as e,w as D,ao as N,r as o,c as u,ap as k,aq as S,ar as C,as as w,at as y,a as T}from"./index-e9055987.js";import{C as b}from"./Card-433b6df5.js";import{T as j}from"./index-95867d9f.js";import{T as c}from"./Tag-0c9ab60f.js";import{A as d}from"./index-48bcc748.js";import{c as R,u as H,g as v,f as g}from"./index-f0b8471c.js";import{h as A,O as E,P as M,Q as L,R as z,S as I}from"./index.esm-1ac4f407.js";import{a as Y}from"./CrmService-f5d63b63.js";import"./Tooltip-c9ef7fc2.js";import"./warning-6ee4a779.js";import"./index-8f83c5d8.js";import"./motion-4061acbd.js";async function F(){return f.fetchData({url:"/subscription-links",method:"get"})}const{Tr:h,Td:O,TBody:B,THead:G,Th:P}=j,U=({row:a})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{shape:"circle",size:25,src:a.avatar}),e.jsx("span",{className:"font-semibold",children:a.name})]}),V=({row:a})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-semibold",children:a.comida})}),_=({status:a})=>{switch(a){case 0:return e.jsx(c,{className:"rounded-md",children:"New"});case 1:return e.jsx(c,{className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100  border-0 rounded",children:"Sold"});case 2:return e.jsx(c,{className:"text-amber-600 bg-amber-100 dark:text-amber-100 dark:bg-amber-500/20  border-0 rounded",children:"Not Interested"});case 3:return e.jsx(c,{className:"bg-blue-100 text-blue-600 dark:bg-blue-500/20 dark:text-blue-100 border-0 rounded",children:"In Progress"});default:return e.jsx(e.Fragment,{})}},n=R(),$=[n.accessor("name",{header:"Nombre",cell:a=>{const s=a.row.original;return e.jsx(U,{row:s})}}),n.accessor("comida",{header:"Comida",cell:a=>{const s=a.row.original;return e.jsx(V,{row:s})}}),n.accessor("status",{header:"Status",cell:a=>{const s=a.row.original;return e.jsx(_,{status:s.status})}}),n.accessor("email",{header:"Email"}),n.accessor("createdTime",{header:"Created Time",cell:a=>{const s=a.row.original;return e.jsx("span",{children:D.unix(s.createdTime).format("DD/MM/YYYY hh:mm")})}}),n.accessor("assignee",{header:"Assignee",cell:a=>{const s=a.row.original;return e.jsx(c,{className:"rounded-md font-bold cursor-pointer select-none text-gray-900 dark:text-gray-100",children:s.assignee})}})],q=({data:a=[],className:s})=>{N(),o.useState(!1);const[i,l]=o.useState({_id:"",expDate:""}),m=H({data:a,columns:$,getCoreRowModel:v()});return o.useEffect(()=>{F().then(t=>{console.log(t.data),l(t.data)})},[]),e.jsx(e.Fragment,{children:e.jsxs(b,{className:s,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h4",{children:"Vendedores"})}),e.jsxs(j,{children:[e.jsx(G,{children:m.getHeaderGroups().map(t=>e.jsx(h,{children:t.headers.map(r=>e.jsx(P,{colSpan:r.colSpan,children:g(r.column.columnDef.header,r.getContext())},r.id))},t.id))}),e.jsx(B,{children:m.getRowModel().rows.map(t=>e.jsx(h,{children:t.getVisibleCells().map(r=>e.jsx(O,{children:g(r.column.columnDef.cell,r.getContext())},r.id))},t.id))})]})]})})},Q=({value:a})=>e.jsxs("span",{className:"flex items-center rounded-full gap-1",children:[e.jsxs("span",{className:u("rounded-full p-1",a>0&&"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100",a<0&&"text-red-600 bg-red-100 dark:text-red-100 dark:bg-red-500/20"),children:[a>0&&e.jsx(A,{}),a<0&&e.jsx(E,{})]}),e.jsxs("span",{className:u("font-semibold",a>0&&"text-emerald-600",a<0&&"text-red-600"),children:[a>0&&e.jsx(e.Fragment,{children:"+ "}),a]})]}),J=({type:a})=>{switch(a){case"newLeads":return e.jsx(d,{size:55,className:"bg-indigo-100 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-100",icon:e.jsx(I,{})});case"emailResponse":return e.jsx(d,{size:55,className:"bg-cyan-100 text-cyan-600 dark:bg-cyan-500/20 dark:text-cyan-100",icon:e.jsx(z,{})});case"proposals":return e.jsx(d,{size:55,className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100",icon:e.jsx(L,{})});case"appointment":return e.jsx(d,{size:55,className:"bg-amber-100 text-amber-600 dark:bg-amber-500/20 dark:text-amber-100",icon:e.jsx(M,{})});default:return e.jsx("div",{})}},K=({data:a={}})=>e.jsx(b,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(J,{type:a.key}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-1.5 items-end mb-2",children:[e.jsx("h3",{className:"font-bold leading-none",children:a.value}),e.jsx("p",{className:"font-semibold",children:a.label})]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(Q,{value:a.growShrink||0}),e.jsx("span",{children:"this month"})]})]})]})}),W=({data:a=[]})=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:a.map(s=>e.jsx(K,{data:s},s.key))}),X="crmDashboard",x=k("crmDashboard/data/getCrmDashboardData",async()=>(await Y()).data),Z={loading:!0,dashboardData:{}},ee=S({name:`${X}/state`,initialState:Z,reducers:{},extraReducers:a=>{a.addCase(x.fulfilled,(s,i)=>{s.dashboardData=i.payload,s.loading=!1}).addCase(x.pending,s=>{s.loading=!0})}}),ae=ee.reducer,se=C({data:ae}),p=w;y("crmDashboard",se);const re=()=>{const a=T(),{statisticData:s,leadByRegionData:i,recentLeadsData:l,emailSentData:m}=p(r=>r.crmDashboard.data.dashboardData);p(r=>r.crmDashboard.data.loading),o.useEffect(()=>{t()},[]);const t=()=>{a(x())};return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsx(W,{data:s}),e.jsx(q,{data:l})]})},pe=re;export{pe as default};
