import{r as a,j as e,ax as p}from"./index-e9055987.js";import"./Alert-102e0217.js";import"./index-48bcc748.js";import"./Badge-9568a8b0.js";import{B as k}from"./Button-ba65fcd6.js";import"./Card-433b6df5.js";import"./index-0b16cfb5.js";import"./index-6ec4b8b8.js";import"./Dialog-0f29b530.js";import"./Drawer-1d10f851.js";import"./ScrollBar-7cb0876a.js";import"./FormItem-ea0b05bc.js";import"./Input-cff490ba.js";import"./index-cba86877.js";import"./index-fd641029.js";import"./toast-38b8809c.js";import"./Skeleton-ede84c2e.js";import"./index-6bfd69bd.js";import"./index-ca92c429.js";import"./Select-3959542b.js";import"./Switcher-fc6ab2a0.js";import"./index-95867d9f.js";import"./index-470afdad.js";import"./Tag-0c9ab60f.js";import"./index-b1813226.js";import"./Tooltip-c9ef7fc2.js";import"./Upload-73c59612.js";import{c as N}from"./createLucideIcon-35c01f3b.js";import{X as E}from"./x-663813fb.js";import"./StatusIcon-879e2680.js";import"./index.esm-1ac4f407.js";import"./CloseButton-3f8e850c.js";import"./motion-4061acbd.js";import"./cloneDeep-860e24f8.js";import"./_Uint8Array-1ce16692.js";import"./_MapCache-0feb66c1.js";import"./Views-51136580.js";import"./_getPrototype-241bf201.js";import"./_baseIsEqual-7de73e16.js";import"./get-c3140d19.js";import"./useControllableState-461bebfa.js";import"./useRootClose-9a8a5c26.js";import"./useDidUpdate-5adca6d0.js";import"./index-1248b5e2.js";import"./warning-6ee4a779.js";import"./useUncertainRef-63de6025.js";import"./isNil-1a93575e.js";import"./index-8f83c5d8.js";/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=N("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=N("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),M={getCurrencies:async()=>{const{data:s,error:r}=await p.from("currency").select("*").order("id");return r?(console.error("Error fetching currencies:",r),[]):s||[]},updateCurrency:async(s,r)=>{const{data:i,error:o}=await p.from("currency").update({exchange_rate:r}).eq("id",s).select("*").single();if(o)throw console.error("Error updating currency:",o),o;return i}},y=M;function ve(){const[s,r]=a.useState([]),[i,o]=a.useState(null),[c,l]=a.useState(""),[x,h]=a.useState(null),[j,d]=a.useState(!1),[m,g]=a.useState(""),[u,b]=a.useState("");a.useEffect(()=>{console.log("first"),y.getCurrencies().then(r)},[]);const C=t=>{o(t),l(t.exchange_rate.toString())},f=()=>{o(null),l("")},w=async()=>{if(m&&u){const{data:t,error:n}=await p.from("currency").insert({name:m,exchange_rate:parseFloat(u),is_automatic:!1}).select().single();n&&console.error("Error adding currency:",n),r([...s,t]),d(!1),g(""),b("")}},v=async()=>{if(i&&c)try{const t=await y.updateCurrency(i.id,parseFloat(c));r(s.map(n=>n.id===t.id?t:n)),f(),h(`${t.name} actualizado correctamente`),setTimeout(()=>h(null),3e3)}catch(t){console.error("Error updating currency:",t)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Divisas"}),x&&e.jsxs("div",{className:"fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded shadow-lg flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2"}),x]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:s.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-xl font-bold",children:t.name}),e.jsx("button",{onClick:()=>C(t),className:"text-blue-500 hover:text-blue-700","aria-label":`Editar ${t.name}`,children:e.jsx(A,{className:"h-5 w-5"})})]}),e.jsxs("p",{children:["Tasa de cambio: ",t.exchange_rate]})]},t.id))}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:["Editar ",i.name]}),e.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700",children:e.jsx(E,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"exchangeRate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva tasa de cambio"}),e.jsx("input",{type:"number",id:"exchangeRate",value:c,onChange:t=>l(t.target.value),className:"w-full p-2 border rounded",step:"0.01"})]}),e.jsx("button",{onClick:v,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Actualizar"})]})}),e.jsx(k,{onClick:()=>d(!0),variant:"default",className:"font-bold py-2 px-4 rounded mb-4 mt-5",children:"Añadir Nueva Moneda"}),j&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Añadir Nueva Moneda"}),e.jsx("input",{type:"text",placeholder:"Nombre de la Moneda",value:m,onChange:t=>g(t.target.value),className:"border rounded p-2 mb-2 w-full"}),e.jsx("input",{type:"number",placeholder:"Tasa de Cambio",value:u,onChange:t=>b(t.target.value),className:"border rounded p-2 mb-4 w-full"}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:()=>d(!1),className:"bg-gray-300 hover:bg-gray-400 text-black font-bold py-2 px-4 rounded mr-2",children:"Cancelar"}),e.jsx("button",{onClick:w,className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded",children:"Agregar Moneda"})]})]})})]})}export{ve as default};
