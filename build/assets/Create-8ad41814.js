import{r as l,u as j,j as a,ax as p}from"./index-e9055987.js";import{I as S}from"./Input-cff490ba.js";import{B as u}from"./Button-ba65fcd6.js";import{U as w}from"./index-a547e199.js";import"./Views-51136580.js";import"./isNil-1a93575e.js";import"./get-c3140d19.js";import"./_MapCache-0feb66c1.js";const y=async o=>{try{const{data:s,error:t}=await p.from("slides").insert(o);if(t)throw t;return s}catch(s){throw console.error("Error creating slide:",s),s}},D=async(o,s)=>{try{const{data:t,error:i}=await p.from("slides").update(s).eq("id",o);if(i)throw i;return t}catch(t){throw console.error("Error updating slide:",t),t}};function _(){const[o,s]=l.useState({name:"",images:[""],shop_id:""}),{shopId:t}=j(e=>e.auth.user),[i,h]=l.useState(),[d,x]=l.useState([]),f=async e=>{e.preventDefault();try{const r=o;r.images=d,r.shop_id=t,await y(o)}catch(r){console.error("Error creating slide:",r)}},g=async(e,r,n)=>{if(console.log("VIDEO"),console.log(r,e),e){h(e),n.close({quiet:!0});return}x(c=>[...c,r])};return a.jsx("div",{className:"container mx-auto p-4",children:a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",children:"Nombre"}),a.jsx(S,{id:"name",value:o.name,onChange:e=>s({...o,name:e.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{children:"ImÃ¡genes"}),a.jsx("div",{className:"flex flex-row overflow-scroll",children:d.map(e=>a.jsx("img",{src:e,className:"w-80 h-60",alt:""},e))}),a.jsx(w,{onUpload:(e,r,n)=>{var m;const c=(m=r==null?void 0:r.info)==null?void 0:m.secure_url;g(e,c,n)},children:({open:e})=>{function r(n){n.preventDefault(),e()}return a.jsx(u,{type:"button",className:"mt-2",onClick:r,children:"Agregar Imagen"})}})]}),a.jsx(u,{type:"submit",children:"Crear Slide"})]})})}export{y as createSlide,_ as default,D as updateSlide};
